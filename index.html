<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Math Game Wireframe</title>
  <style>
    :root {
      color-scheme: light;
      font-family: Arial, Helvetica, sans-serif;
    }
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      background: #f2f2f2;
      color: #1a1a1a;
    }
    .app {
      display: grid;
      grid-template-columns: 260px 1fr;
      min-height: 100vh;
    }
    .sidebar {
      background: #fafafa;
      border-right: 1px solid #d0d0d0;
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    .sidebar h1 {
      margin: 0;
      font-size: 18px;
      letter-spacing: 0.5px;
    }
    .sidebar nav {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .sidebar button {
      padding: 8px 12px;
      border: 1px solid #b5b5b5;
      background: #ffffff;
      text-align: left;
      font-size: 14px;
      cursor: pointer;
    }
    .sidebar button:focus,
    .sidebar button:hover {
      outline: none;
      border-color: #8c8c8c;
    }
    .current-route {
      font-size: 12px;
      color: #555555;
    }
    main {
      padding: 32px;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }
    .screen {
      display: none;
      flex-direction: column;
      gap: 16px;
    }
    .screen.active {
      display: flex;
    }
    .panel {
      background: #ffffff;
      border: 1px solid #c4c4c4;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .panel h2,
    .panel h3 {
      margin: 0;
      font-size: 16px;
    }
    .layout-row {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }
    .grid {
      display: grid;
      gap: 12px;
    }
    .grid.columns-2 {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
    .grid.columns-3 {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }
    .card {
      border: 1px dashed #a0a0a0;
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .card strong {
      font-size: 14px;
    }
    .action {
      border: 1px solid #707070;
      background: #f9f9f9;
      padding: 8px 10px;
      font-size: 13px;
      cursor: pointer;
    }
    .action.muted {
      border-style: dashed;
      color: #777777;
    }
    .header-bar {
      background: #ffffff;
      border: 1px solid #c4c4c4;
      padding: 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
    }
    .exercise-header {
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }
    .exercise-header .avatar-placeholder {
      margin: 0 auto;
    }
    .progress-block {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      width: 100%;
    }
    .question-progress {
      width: 100%;
      max-width: 320px;
      margin: 12px auto 0;
    }
    .avatar-placeholder {
      width: 192px;
      height: 192px;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      background: transparent;
    }
    @keyframes flip {
      0% {
        transform: rotateY(0deg);
      }
      100% {
        transform: rotateY(360deg);
      }
    }
    .avatar-flip {
      animation: flip 0.6s ease-in-out;
    }
    .custom-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal-content {
      background: white;
      padding: 32px;
      border-radius: 8px;
      text-align: center;
      min-width: 300px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .modal-content p {
      margin: 0 0 24px 0;
      font-size: 18px;
      font-weight: 600;
    }
    .modal-content button {
      padding: 10px 32px;
      font-size: 16px;
      background: #2b2b2b;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .modal-content button:hover {
      background: #4d4d4d;
    }
    .stat-block {
      border: 1px solid #b3b3b3;
      padding: 8px 12px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 13px;
      min-width: 140px;
    }
    .progress {
      border: 1px solid #4d4d4d;
      height: 12px;
      position: relative;
      background: #ffffff;
    }
    .progress span {
      display: block;
      height: 100%;
      background: #2b2b2b;
      width: 50%;
    }
    .question-area {
      border: 2px solid #1a1a1a;
      padding: 24px;
      font-size: 24px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .problem-text {
      letter-spacing: 1px;
    }
    .problem-helpers {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
      justify-content: center;
    }
    .icon-group {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .icon-group.column {
      flex-direction: column;
      align-items: center;
    }
    .operator {
      font-size: 18px;
      padding: 0 4px;
    }
    .helper-icons {
      display: flex;
      gap: 8px;
      justify-content: center;
    }
    .helper-icon {
      width: 32px;
      height: 32px;
      border: 1px solid #7a7a7a;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      background: #f8f8f8;
    }
    form {
      display: flex;
      gap: 12px;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
    }
    input[type="text"],
    input[type="password"],
    input[type="number"] {
      border: 1px solid #7a7a7a;
      padding: 8px;
      min-width: 160px;
      background: #ffffff;
    }
    .feedback {
      display: flex;
      gap: 16px;
      justify-content: center;
      flex-wrap: wrap;
      font-size: 13px;
    }
    .list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 13px;
    }
    .breadcrumb {
      font-size: 12px;
      color: #555555;
      display: flex;
      gap: 4px;
      flex-wrap: wrap;
    }
    .breadcrumb span::after {
      content: "/";
      margin-left: 4px;
      color: #a0a0a0;
    }
    .breadcrumb span:last-child::after {
      content: "";
    }
    .breadcrumb-link {
      cursor: pointer;
      text-decoration: underline;
    }
    .home-breadcrumb {
      justify-content: space-between;
      align-items: center;
      flex-wrap: nowrap;
      width: 100%;
    }
    .home-breadcrumb span {
      flex: 0 0 auto;
    }
    @media (max-width: 900px) {
      .app {
        grid-template-columns: 1fr;
      }
      .sidebar {
        border-right: none;
        border-bottom: 1px solid #d0d0d0;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <h1>Routes</h1>
      <div class="current-route" id="current-route">Current: /login</div>
      <nav>
        <button data-route="/login">/login</button>
        <button data-route="/home">/home</button>
        <button data-route="/home/addition">/home/addition</button>
        <button data-route="/home/addition/easy">/home/addition/easy</button>
        <button data-route="/home/addition/medium">/home/addition/medium</button>
        <button data-route="/home/addition/hard">/home/addition/hard</button>
        <button data-route="/home/subtraction">/home/subtraction</button>
        <button data-route="/home/subtraction/easy">/home/subtraction/easy</button>
        <button data-route="/home/subtraction/medium">/home/subtraction/medium</button>
        <button data-route="/home/subtraction/hard">/home/subtraction/hard</button>
        <button data-route="/home/multiplication">/home/multiplication</button>
        <button data-route="/home/multiplication/easy">/home/multiplication/easy</button>
        <button data-route="/home/multiplication/medium">/home/multiplication/medium</button>
        <button data-route="/home/multiplication/hard">/home/multiplication/hard</button>
        <button data-route="/home/division">/home/division</button>
        <button data-route="/home/division/easy">/home/division/easy</button>
        <button data-route="/home/division/medium">/home/division/medium</button>
        <button data-route="/home/division/hard">/home/division/hard</button>
        <button data-route="/settings">Settings</button>
        <button data-route="/settings/avatar">Settings / Avatar</button>
        <button data-route="/settings/icons">Settings / Icons</button>
        <button data-route="/settings/stats">Settings / Stats</button>
      </nav>
    </aside>
    <main>
      <section class="screen active" data-screen="/login">
        <div style="max-width: 600px; margin: 0 auto; display: flex; flex-direction: column; gap: 32px; padding: 32px;">

          <!-- Section 1: Welcome -->
          <div style="text-align: center;">
            <h1 style="font-size: 32px; margin: 0 0 8px 0;">Hi there! ðŸ‘‹</h1>
            <h2 style="font-size: 24px; margin: 0; font-weight: normal;">Welcome to Math Universe</h2>
          </div>

          <!-- Section 2: Name Input -->
          <div style="text-align: center;">
            <label style="display: block; font-size: 18px; margin-bottom: 12px; font-weight: 600;">What's your name?</label>
            <input type="text" id="user-name-input" placeholder="Enter your name" style="width: 100%; max-width: 400px; padding: 12px; font-size: 16px; border: 1px solid #7a7a7a; border-radius: 4px;" />
          </div>

          <!-- Section 3: Choose Avatar -->
          <div style="text-align: center;">
            <h3 style="font-size: 20px; margin: 0 0 16px 0;">Choose your Avatar</h3>
            <div class="grid columns-3" id="intro-avatar-selection" style="max-width: 500px; margin: 0 auto;">
              <div class="card" style="cursor: pointer;" data-avatar="images/roblox.png">
                <img src="images/roblox.png" alt="Roblox Avatar" style="width: 100%; height: 150px; object-fit: contain; border: 3px solid #2b2b2b;">
                <div style="text-align: center; margin-top: 8px; font-weight: 600;">Roblox</div>
              </div>
              <div class="card" style="cursor: pointer;" data-avatar="images/minecraft.png">
                <img src="images/minecraft.png" alt="Minecraft Avatar" style="width: 100%; height: 150px; object-fit: contain; border: 3px solid transparent;">
                <div style="text-align: center; margin-top: 8px; font-weight: 600;">Minecraft</div>
              </div>
              <div class="card" style="cursor: pointer;" data-avatar="images/Bamse.png">
                <img src="images/Bamse.png" alt="Bamse Avatar" style="width: 100%; height: 150px; object-fit: contain; border: 3px solid transparent;">
                <div style="text-align: center; margin-top: 8px; font-weight: 600;">Bamse</div>
              </div>
            </div>
          </div>

          <!-- Section 4: Get Started Button -->
          <div style="text-align: center;">
            <button id="get-started-btn" class="action" style="padding: 16px 48px; font-size: 20px; background: #2b2b2b; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
              Let's Get Started! ðŸš€
            </button>
          </div>

        </div>
      </section>

      <section class="screen" data-screen="/home">
        <div class="breadcrumb home-breadcrumb"><span>home</span><span data-route="/settings" class="breadcrumb-link">Settings</span></div>
        <div class="header-bar" style="flex-direction: column; align-items: center; text-align: center;">
          <div class="avatar-placeholder" style="width: 192px; height: 192px; border: none; background: transparent;">Avatar</div>
          <div style="margin-top: 16px;">
            <div style="font-size: 18px; font-weight: 600;">Welcome to the Math Universe!</div>
            <div style="font-size: 14px; color: #555; margin-top: 4px;">Choose a math adventure</div>
          </div>
        </div>
        <div class="panel">
          <h2>Select a Section</h2>
          <div class="grid columns-2">
            <div class="card">
              <strong>Addition (Plus)</strong>
              <span>Practice combining numbers.</span>
              <div class="grid columns-3">
                <button class="action" data-route="/home/addition/easy">Easy</button>
                <button class="action" data-route="/home/addition/medium">Medium</button>
                <button class="action" data-route="/home/addition/hard">Hard</button>
              </div>
            </div>
            <div class="card">
              <strong>Subtraction (Minus)</strong>
              <span>Practice taking away.</span>
              <div class="grid columns-3">
                <button class="action" data-route="/home/subtraction/easy">Easy</button>
                <button class="action" data-route="/home/subtraction/medium">Medium</button>
                <button class="action" data-route="/home/subtraction/hard">Hard</button>
              </div>
            </div>
            <div class="card">
              <strong>Multiplication (Multiple)</strong>
              <span>Practice repeated addition.</span>
              <div class="grid columns-3">
                <button class="action" data-route="/home/multiplication/easy">Easy</button>
                <button class="action" data-route="/home/multiplication/medium">Medium</button>
                <button class="action" data-route="/home/multiplication/hard">Hard</button>
              </div>
            </div>
            <div class="card">
              <strong>Division (Divide)</strong>
              <span>Practice sharing equally.</span>
              <div class="grid columns-3">
                <button class="action" data-route="/home/division/easy">Easy</button>
                <button class="action" data-route="/home/division/medium">Medium</button>
                <button class="action muted" data-route="/home/division/hard">Hard (disabled)</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="screen" data-screen="/home/addition">
        <div class="breadcrumb"><span>home</span><span>addition</span></div>
        <div class="panel">
          <h2>Addition Levels</h2>
          <ul class="list">
            <li>Easy: a + b â‰¤ 10, a and b âˆˆ [5, 9]</li>
            <li>Medium: a + b â‰¤ 15</li>
            <li>Hard: a + b â‰¤ 100</li>
          </ul>
          <div class="grid columns-3">
            <button class="action" data-route="/home/addition/easy">Start Easy</button>
            <button class="action" data-route="/home/addition/medium">Start Medium</button>
            <button class="action" data-route="/home/addition/hard">Start Hard</button>
          </div>
        </div>
      </section>

      <section class="screen" data-screen="/home/addition/easy">
        <div class="breadcrumb"><span>home</span><span>addition</span><span>easy</span></div>
        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div>Question 7 of 10</div>
            <div class="progress question-progress"><span style="width: 60%;"></span></div>
          </div>
        </div>
        <div class="question-area">
          <div class="problem-text">5 + 3 = ( )</div>
          <div class="problem-helpers">
            <div class="icon-group">
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
            </div>
            <span class="operator">+</span>
            <div class="icon-group">
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
            </div>
          </div>
        </div>
        <form>
          <input type="number" placeholder="Answer" />
          <button class="action">Submit Answer</button>
        </form>
      </section>

      <section class="screen" data-screen="/home/addition/medium">
        <div class="breadcrumb"><span>home</span><span>addition</span><span>medium</span></div>
        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div>Question 4 of 10</div>
            <div class="progress question-progress"><span style="width: 30%;"></span></div>
          </div>
        </div>
        <div class="question-area">9 + 5 = ( )</div>
        <form>
          <input type="number" placeholder="Answer" />
          <button class="action">Submit Answer</button>
        </form>
      </section>

      <section class="screen" data-screen="/home/addition/hard">
        <div class="breadcrumb"><span>home</span><span>addition</span><span>hard</span></div>
        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div>Question 1 of 10</div>
            <div class="progress question-progress"><span style="width: 10%;"></span></div>
          </div>
        </div>
        <div class="question-area">35 + 47 = ( )</div>
        <form>
          <input type="number" placeholder="Answer" />
          <button class="action">Submit Answer</button>
        </form>
      </section>

      <section class="screen" data-screen="/home/subtraction">
        <div class="breadcrumb"><span>home</span><span>subtraction</span></div>
        <div class="panel">
          <h2>Subtraction Levels</h2>
          <ul class="list">
            <li>Easy: a âˆ’ b, a â‰¤ 10, result â‰¥ 0</li>
            <li>Medium: a âˆ’ b, a and b are two-digit numbers > 20 and > 10</li>
            <li>Hard: a âˆ’ b âˆ’ c, a is a two-digit number > 20, result â‰¥ 0</li>
          </ul>
          <div class="grid columns-3">
            <button class="action" data-route="/home/subtraction/easy">Start Easy</button>
            <button class="action" data-route="/home/subtraction/medium">Start Medium</button>
            <button class="action" data-route="/home/subtraction/hard">Start Hard</button>
          </div>
        </div>
      </section>

      <section class="screen" data-screen="/home/subtraction/easy">
        <div class="breadcrumb"><span>home</span><span>subtraction</span><span>easy</span></div>
        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div>Question 6 of 10</div>
            <div class="progress question-progress"><span style="width: 50%;"></span></div>
          </div>
        </div>
        <div class="question-area">
          <div class="problem-text">9 âˆ’ 4 = ( )</div>
          <div class="problem-helpers">
            <div class="icon-group">
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
            </div>
            <span class="operator">âˆ’</span>
            <div class="icon-group">
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
            </div>
          </div>
        </div>
        <form>
          <input type="number" placeholder="Answer" />
          <button class="action">Submit Answer</button>
        </form>
      </section>

      <section class="screen" data-screen="/home/subtraction/medium">
        <div class="breadcrumb"><span>home</span><span>subtraction</span><span>medium</span></div>
        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div>Question 3 of 10</div>
            <div class="progress question-progress"><span style="width: 30%;"></span></div>
          </div>
        </div>
        <div class="question-area">40 âˆ’ 18 = ( )</div>
        <form>
          <input type="number" placeholder="Answer" />
          <button class="action">Submit Answer</button>
        </form>
      </section>

      <section class="screen" data-screen="/home/subtraction/hard">
        <div class="breadcrumb"><span>home</span><span>subtraction</span><span>hard</span></div>
        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div>Question 2 of 10</div>
            <div class="progress question-progress"><span style="width: 20%;"></span></div>
          </div>
        </div>
        <div class="question-area">60 âˆ’ 20 âˆ’ 15 = ( )</div>
        <form>
          <input type="number" placeholder="Answer" />
          <button class="action">Submit Answer</button>
        </form>
      </section>

      <section class="screen" data-screen="/home/multiplication">
        <div class="breadcrumb"><span>home</span><span>multiplication</span></div>
        <div class="panel">
          <h2>Multiplication Levels</h2>
          <ul class="list">
            <li>Easy: a Ã— b, a and b âˆˆ [1, 4]</li>
            <li>Medium: a Ã— b, a and b âˆˆ [6, 9]</li>
            <li>Hard: a Ã— b, a âˆˆ [10, 99] (two-digit multiples of ten), b âˆˆ [2, 9]</li>
          </ul>
          <div class="grid columns-3">
            <button class="action" data-route="/home/multiplication/easy">Start Easy</button>
            <button class="action" data-route="/home/multiplication/medium">Start Medium</button>
            <button class="action" data-route="/home/multiplication/hard">Start Hard</button>
          </div>
        </div>
      </section>

      <section class="screen" data-screen="/home/multiplication/easy">
        <div class="breadcrumb"><span>home</span><span>multiplication</span><span>easy</span></div>
        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div>Question 5 of 10</div>
            <div class="progress question-progress"><span style="width: 40%;"></span></div>
          </div>
        </div>
        <div class="question-area">
          <div class="problem-text">2 Ã— 3 = ( )</div>
          <div class="problem-helpers">
            <div class="icon-group column">
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
            </div>
            <span class="operator">Ã—</span>
            <div class="icon-group column">
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
            </div>
          </div>
        </div>
        <form>
          <input type="number" placeholder="Answer" />
          <button class="action">Submit Answer</button>
        </form>
      </section>

      <section class="screen" data-screen="/home/multiplication/medium">
        <div class="breadcrumb"><span>home</span><span>multiplication</span><span>medium</span></div>
        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div>Question 3 of 10</div>
            <div class="progress question-progress"><span style="width: 30%;"></span></div>
          </div>
        </div>
        <div class="question-area">7 Ã— 8 = ( )</div>
        <form>
          <input type="number" placeholder="Answer" />
          <button class="action">Submit Answer</button>
        </form>
      </section>

      <section class="screen" data-screen="/home/multiplication/hard">
        <div class="breadcrumb"><span>home</span><span>multiplication</span><span>hard</span></div>
        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div>Question 2 of 10</div>
            <div class="progress question-progress"><span style="width: 20%;"></span></div>
          </div>
        </div>
        <div class="question-area">40 Ã— 6 = ( )</div>
        <form>
          <input type="number" placeholder="Answer" />
          <button class="action">Submit Answer</button>
        </form>
      </section>

      <section class="screen" data-screen="/home/division">
        <div class="breadcrumb"><span>home</span><span>division</span></div>
        <div class="panel">
          <h2>Division Levels</h2>
          <ul class="list">
            <li>Easy: a Ã· b, a from 9Ã—9 multiplication table, b âˆˆ [2, 4]</li>
            <li>Medium: a Ã· b, a from 9Ã—9 multiplication table, b âˆˆ [6, 9]</li>
            <li>Hard: Not available (route retained, disabled)</li>
          </ul>
          <div class="grid columns-3">
            <button class="action" data-route="/home/division/easy">Start Easy</button>
            <button class="action" data-route="/home/division/medium">Start Medium</button>
            <button class="action muted" data-route="/home/division/hard">Hard (disabled)</button>
          </div>
        </div>
      </section>

      <section class="screen" data-screen="/home/division/easy">
        <div class="breadcrumb"><span>home</span><span>division</span><span>easy</span></div>
        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div>Question 9 of 10</div>
            <div class="progress question-progress"><span style="width: 90%;"></span></div>
          </div>
        </div>
        <div class="question-area">
          <div class="problem-text">24 Ã· 3 = ( )</div>
          <div class="problem-helpers">
            <div class="icon-group">
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
            </div>
            <span class="operator">Ã·</span>
            <div class="icon-group">
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
            </div>
            <span class="operator">Ã·</span>
            <div class="icon-group">
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
              <div class="helper-icon">Icon</div>
            </div>
          </div>
        </div>
        <form>
          <input type="number" placeholder="Answer" />
          <button class="action">Submit Answer</button>
        </form>
      </section>

      <section class="screen" data-screen="/home/division/medium">
        <div class="breadcrumb"><span>home</span><span>division</span><span>medium</span></div>
        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div>Question 6 of 10</div>
            <div class="progress question-progress"><span style="width: 60%;"></span></div>
          </div>
        </div>
        <div class="question-area">72 Ã· 8 = ( )</div>
        <form>
          <input type="number" placeholder="Answer" />
          <button class="action">Submit Answer</button>
        </form>
      </section>

      <section class="screen" data-screen="/home/division/hard">
        <div class="breadcrumb"><span>home</span><span>division</span><span>hard</span></div>
        <div class="panel" style="align-items: center;">
          <h2>Division Hard</h2>
          <p>This route is reserved and remains disabled according to the PRD.</p>
          <button class="action" data-route="/home/division">Return to division levels</button>
        </div>
      </section>

      <section class="screen" data-screen="/settings">
        <div class="breadcrumb"><span>Settings</span></div>
        <div class="panel">
          <h2>Settings</h2>
          <p>Update avatar, helper icons, and review learning statistics.</p>
          <div class="grid columns-3" style="max-width: 720px;">
            <button class="action" data-route="/settings/avatar">Avatar library</button>
            <button class="action" data-route="/settings/icons">Helper icon library</button>
            <button class="action" data-route="/settings/stats">My stats</button>
          </div>
          <button class="action" data-route="/home">Back to home</button>
        </div>
      </section>

      <section class="screen" data-screen="/settings/avatar">
        <div class="breadcrumb"><span>Settings</span><span>avatar</span></div>
        <div class="panel">
          <h2>Avatar Library</h2>
          <p>Choose an avatar. Selection updates the exercise header immediately.</p>
          <div class="grid columns-3">
            <div class="card">
              <img src="images/roblox.png" alt="Roblox Avatar" style="width: 100%; height: 200px; object-fit: contain; border: 2px solid #2b2b2b;">
              <button class="action selected-avatar">Selected âœ“</button>
            </div>
            <div class="card">
              <img src="images/minecraft.png" alt="Minecraft Avatar" style="width: 100%; height: 200px; object-fit: contain;">
              <button class="action">Select Avatar</button>
            </div>
            <div class="card">
              <img src="images/Bamse.png" alt="Bamse Avatar" style="width: 100%; height: 200px; object-fit: contain;">
              <button class="action">Select Avatar</button>
            </div>
          </div>
          <button class="action" data-route="/settings">Back to Settings</button>
        </div>
      </section>

      <section class="screen" data-screen="/settings/icons">
        <div class="breadcrumb"><span>Settings</span><span>icons</span></div>
        <div class="panel">
          <h2>Helper Icon Library</h2>
          <p>Select quantity helper icons used in Easy levels.</p>
          <div class="grid columns-3">
            <div class="card">
              <div class="helper-icons">
                <div class="helper-icon">Token</div>
                <div class="helper-icon">Token</div>
                <div class="helper-icon">Token</div>
              </div>
              <button class="action">Use set</button>
            </div>
            <div class="card">
              <div class="helper-icons">
                <div class="helper-icon">Coin</div>
                <div class="helper-icon">Coin</div>
                <div class="helper-icon">Coin</div>
              </div>
              <button class="action">Use set</button>
            </div>
            <div class="card">
              <div class="helper-icons">
                <div class="helper-icon">Star</div>
                <div class="helper-icon">Star</div>
                <div class="helper-icon">Star</div>
              </div>
              <button class="action">Use set</button>
            </div>
          </div>
          <button class="action" data-route="/settings">Back to Settings</button>
        </div>
      </section>

      <section class="screen" data-screen="/settings/stats">
        <div class="breadcrumb"><span>Settings</span><span>stats</span></div>
        <div class="panel">
          <h2>My Stats</h2>
          <div class="layout-row">
            <div class="card" style="flex: 1;">
              <strong>Today</strong>
              <ul class="list">
                <li>Addition: 10</li>
                <li>Subtraction: 2</li>
                <li>Multiplication: 0</li>
                <li>Division: 0</li>
              </ul>
            </div>
            <div class="card" style="flex: 1;">
              <strong>This Week</strong>
              <ul class="list">
                <li>Addition: 24</li>
                <li>Subtraction: 12</li>
                <li>Multiplication: 6</li>
                <li>Division: 0</li>
              </ul>
            </div>
          </div>
          <p style="font-size: 12px; color: #666666;">Stats follow the rule of 10 questions per completed level.</p>
          <button class="action" data-route="/settings">Back to Settings</button>
        </div>
      </section>
    </main>
  </div>
  <script>
    (function () {
      const buttons = document.querySelectorAll('[data-route]');
      const screens = document.querySelectorAll('.screen');
      const routeLabel = document.getElementById('current-route');

      // ========== QUESTION GENERATORS ==========
      function randomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

      // Addition generators
      function generateAdditionEasy() {
        const validPairs = [];
        for (let a = 1; a <= 9; a++) {
          for (let b = 1; b <= 9; b++) {
            if (a + b <= 10) validPairs.push([a, b]);
          }
        }
        return shuffleAndCreate(validPairs, '+');
      }

      function generateAdditionMedium() {
        const validPairs = [];
        for (let a = 1; a <= 14; a++) {
          for (let b = 1; b <= 14; b++) {
            if (a + b <= 15) validPairs.push([a, b]);
          }
        }
        return shuffleAndCreate(validPairs, '+');
      }

      function generateAdditionHard() {
        const questions = [];
        for (let i = 0; i < 10; i++) {
          const a = randomInt(1, 99);
          const b = randomInt(1, 100 - a);
          questions.push({ q: `${a} + ${b}`, answer: a + b });
        }
        return questions;
      }

      // Subtraction generators
      function generateSubtractionEasy() {
        const questions = [];
        for (let i = 0; i < 10; i++) {
          const a = randomInt(1, 10);
          const b = randomInt(0, a);
          questions.push({ q: `${a} âˆ’ ${b}`, answer: a - b });
        }
        return questions;
      }

      function generateSubtractionMedium() {
        const questions = [];
        for (let i = 0; i < 10; i++) {
          const a = randomInt(21, 99);
          const b = randomInt(11, Math.min(a, 99));
          questions.push({ q: `${a} âˆ’ ${b}`, answer: a - b });
        }
        return questions;
      }

      function generateSubtractionHard() {
        const questions = [];
        for (let i = 0; i < 10; i++) {
          const a = randomInt(21, 99);
          const b = randomInt(1, Math.floor(a / 2));
          const c = randomInt(1, a - b);
          questions.push({ q: `${a} âˆ’ ${b} âˆ’ ${c}`, answer: a - b - c });
        }
        return questions;
      }

      // Multiplication generators
      function generateMultiplicationEasy() {
        const validPairs = [];
        for (let a = 1; a <= 4; a++) {
          for (let b = 1; b <= 4; b++) {
            validPairs.push([a, b]);
          }
        }
        return shuffleAndCreate(validPairs, 'Ã—');
      }

      function generateMultiplicationMedium() {
        const validPairs = [];
        for (let a = 6; a <= 9; a++) {
          for (let b = 6; b <= 9; b++) {
            validPairs.push([a, b]);
          }
        }
        return shuffleAndCreate(validPairs, 'Ã—');
      }

      function generateMultiplicationHard() {
        const questions = [];
        for (let i = 0; i < 10; i++) {
          const a = randomInt(10, 99);
          const b = randomInt(2, 9);
          questions.push({ q: `${a} Ã— ${b}`, answer: a * b });
        }
        return questions;
      }

      // Division generators
      function generateDivisionEasy() {
        const multTable = getMultiplicationTable();
        const questions = [];
        for (let i = 0; i < 10; i++) {
          const b = randomInt(2, 4);
          let a;
          do {
            a = multTable[randomInt(0, multTable.length - 1)];
          } while (a % b !== 0);
          questions.push({ q: `${a} Ã· ${b}`, answer: a / b });
        }
        return questions;
      }

      function generateDivisionMedium() {
        const multTable = getMultiplicationTable();
        const questions = [];
        for (let i = 0; i < 10; i++) {
          const b = randomInt(6, 9);
          let a;
          do {
            a = multTable[randomInt(0, multTable.length - 1)];
          } while (a % b !== 0);
          questions.push({ q: `${a} Ã· ${b}`, answer: a / b });
        }
        return questions;
      }

      function getMultiplicationTable() {
        const table = [];
        for (let i = 1; i <= 9; i++) {
          for (let j = 1; j <= 9; j++) {
            table.push(i * j);
          }
        }
        return [...new Set(table)];
      }

      function shuffleAndCreate(pairs, operator) {
        const shuffled = pairs.sort(() => Math.random() - 0.5);
        const questions = [];
        for (let i = 0; i < Math.min(10, shuffled.length); i++) {
          const [a, b] = shuffled[i];
          let answer;
          if (operator === '+') answer = a + b;
          else if (operator === 'Ã—') answer = a * b;
          questions.push({ q: `${a} ${operator} ${b}`, answer });
        }
        return questions;
      }

      // Get generator function based on route
      function getGenerator(route) {
        const generators = {
          '/home/addition/easy': generateAdditionEasy,
          '/home/addition/medium': generateAdditionMedium,
          '/home/addition/hard': generateAdditionHard,
          '/home/subtraction/easy': generateSubtractionEasy,
          '/home/subtraction/medium': generateSubtractionMedium,
          '/home/subtraction/hard': generateSubtractionHard,
          '/home/multiplication/easy': generateMultiplicationEasy,
          '/home/multiplication/medium': generateMultiplicationMedium,
          '/home/multiplication/hard': generateMultiplicationHard,
          '/home/division/easy': generateDivisionEasy,
          '/home/division/medium': generateDivisionMedium,
        };
        return generators[route] || null;
      }

      // ========== EXERCISE STATE ==========
      let currentExercise = {
        questions: [],
        currentIndex: 0,
        score: 0,
        route: null
      };

      // ========== AVATAR STATE ==========
      let selectedAvatar = 'images/roblox.png'; // Default avatar
      let userName = '';

      function updateAllAvatars() {
        // Update all avatar placeholders in the app
        const avatarElements = document.querySelectorAll('.avatar-placeholder');
        avatarElements.forEach(avatar => {
          avatar.innerHTML = `<img src="${selectedAvatar}" alt="Avatar" style="width: 100%; height: 100%; object-fit: contain;">`;
        });
      }

      // ========== INTRO PAGE AVATAR SELECTION ==========
      document.addEventListener('click', (e) => {
        const card = e.target.closest('#intro-avatar-selection .card');
        if (card) {
          const avatarPath = card.dataset.avatar;
          if (avatarPath) {
            // Update selected avatar
            selectedAvatar = avatarPath;

            // Update borders
            const allCards = document.querySelectorAll('#intro-avatar-selection .card img');
            allCards.forEach(img => {
              img.style.border = '3px solid transparent';
            });
            const selectedImg = card.querySelector('img');
            if (selectedImg) {
              selectedImg.style.border = '3px solid #2b2b2b';
            }
          }
        }
      });

      // ========== GET STARTED BUTTON ==========
      document.getElementById('get-started-btn')?.addEventListener('click', () => {
        const nameInput = document.getElementById('user-name-input');
        userName = nameInput?.value.trim() || 'Friend';

        // Update all avatars with selected avatar
        updateAllAvatars();

        // Navigate to home
        showScreen('/home');
      });

      // ========== CUSTOM MODAL ==========
      function showCustomModal(message) {
        // Create modal
        const modal = document.createElement('div');
        modal.className = 'custom-modal';

        const content = document.createElement('div');
        content.className = 'modal-content';

        const text = document.createElement('p');
        text.textContent = message;

        const button = document.createElement('button');
        button.textContent = 'OK';
        button.onclick = () => {
          document.body.removeChild(modal);
        };

        content.appendChild(text);
        content.appendChild(button);
        modal.appendChild(content);
        document.body.appendChild(modal);
      }

      function showScreen(route) {
        screens.forEach((screen) => {
          screen.classList.toggle('active', screen.dataset.screen === route);
        });
        routeLabel.textContent = 'Current: ' + route;

        // Update avatars when showing any screen
        updateAllAvatars();

        // Check if this is an exercise route
        const generator = getGenerator(route);
        if (generator) {
          initExercise(route, generator);
        }
      }

      function initExercise(route, generator) {
        currentExercise = {
          questions: generator(),
          currentIndex: 0,
          score: 0,
          route: route
        };
        updateExerciseDisplay(route);
      }

      function updateExerciseDisplay(route) {
        const screen = document.querySelector(`[data-screen="${route}"]`);
        if (!screen) return;

        const { questions, currentIndex, score } = currentExercise;
        const currentQ = questions[currentIndex];
        const isComplete = currentIndex >= 10;

        // Update question display
        const questionArea = screen.querySelector('.question-area');
        if (questionArea) {
          const problemText = questionArea.querySelector('.problem-text');
          if (problemText) {
            problemText.textContent = isComplete ? `ðŸŽ‰ All questions finished!` : `${currentQ.q} = ( )`;
          } else {
            questionArea.textContent = isComplete ? `ðŸŽ‰ All questions finished!` : `${currentQ.q} = ( )`;
          }

          // Update helper icons for Easy levels
          const problemHelpers = questionArea.querySelector('.problem-helpers');
          if (problemHelpers) {
            if (isComplete) {
              problemHelpers.style.display = 'none';
            } else if (currentQ) {
              updateHelperIcons(problemHelpers, currentQ.q, route);
            }
          }
        }

        // Update progress text
        const progressBlock = screen.querySelector('.progress-block');
        if (progressBlock) {
          const progressText = progressBlock.querySelector('div');
          if (progressText) {
            progressText.textContent = `Question ${Math.min(currentIndex + 1, 10)} of 10`;
          }
        }

        // Update progress bar
        const progressBar = screen.querySelector('.progress');
        if (progressBar) {
          const progressFill = progressBar.querySelector('span');
          if (progressFill) {
            progressFill.style.width = `${Math.min(((currentIndex + 1) / 10) * 100, 100)}%`;
          }
        }

        // Handle form display - hide when complete
        const form = screen.querySelector('form');
        if (form) {
          if (isComplete) {
            form.style.display = 'none';

            // Create completion buttons if not already exist
            let completionDiv = screen.querySelector('.completion-buttons');
            if (!completionDiv) {
              completionDiv = document.createElement('div');
              completionDiv.className = 'completion-buttons';
              completionDiv.style.cssText = 'display: flex; gap: 16px; justify-content: center; margin-top: 24px;';

              const startOverBtn = document.createElement('button');
              startOverBtn.className = 'action';
              startOverBtn.textContent = 'Start Over';
              startOverBtn.style.cssText = 'padding: 12px 24px; font-size: 16px;';
              startOverBtn.onclick = () => {
                initExercise(route, getGenerator(route));
              };

              const homeBtn = document.createElement('button');
              homeBtn.className = 'action';
              homeBtn.textContent = 'Return to Home Page';
              homeBtn.style.cssText = 'padding: 12px 24px; font-size: 16px;';
              homeBtn.onclick = () => {
                showScreen('/home');
              };

              completionDiv.appendChild(startOverBtn);
              completionDiv.appendChild(homeBtn);
              form.parentNode.insertBefore(completionDiv, form.nextSibling);
            }
            completionDiv.style.display = 'flex';
          } else {
            form.style.display = 'flex';
            const completionDiv = screen.querySelector('.completion-buttons');
            if (completionDiv) {
              completionDiv.style.display = 'none';
            }

            // Update input field
            const input = form.querySelector('input[type="number"]');
            if (input) {
              input.value = '';
              input.disabled = false;
            }
          }
        }
      }

      function updateHelperIcons(container, questionText, route) {
        // Only show helper icons for Easy levels
        if (!route.includes('/easy')) {
          container.style.display = 'none';
          return;
        }
        container.style.display = 'flex';

        // Parse the question to get the numbers
        const numbers = questionText.match(/\d+/g);
        if (!numbers || numbers.length < 2) return;

        const a = parseInt(numbers[0]);
        const b = parseInt(numbers[1]);
        const operator = questionText.includes('+') ? '+' :
                        questionText.includes('âˆ’') ? 'âˆ’' :
                        questionText.includes('Ã—') ? 'Ã—' :
                        questionText.includes('Ã·') ? 'Ã·' : '+';

        // Clear existing icons
        container.innerHTML = '';

        // Create first group of icons
        const iconGroup1 = document.createElement('div');
        iconGroup1.className = operator === 'Ã—' ? 'icon-group column' : 'icon-group';
        for (let i = 0; i < a; i++) {
          const icon = document.createElement('div');
          icon.className = 'helper-icon';
          icon.textContent = 'Icon';
          iconGroup1.appendChild(icon);
        }
        container.appendChild(iconGroup1);

        // Add operator
        const operatorSpan = document.createElement('span');
        operatorSpan.className = 'operator';
        operatorSpan.textContent = operator;
        container.appendChild(operatorSpan);

        // Create second group of icons
        const iconGroup2 = document.createElement('div');
        iconGroup2.className = operator === 'Ã—' ? 'icon-group column' : 'icon-group';
        for (let i = 0; i < b; i++) {
          const icon = document.createElement('div');
          icon.className = 'helper-icon';
          icon.textContent = 'Icon';
          iconGroup2.appendChild(icon);
        }
        container.appendChild(iconGroup2);

        // For division, add visual grouping
        if (operator === 'Ã·') {
          // Division shows the total divided into groups
          container.innerHTML = '';

          // Show total items
          const totalGroup = document.createElement('div');
          totalGroup.className = 'icon-group';
          for (let i = 0; i < a; i++) {
            const icon = document.createElement('div');
            icon.className = 'helper-icon';
            icon.textContent = 'Icon';
            totalGroup.appendChild(icon);
          }
          container.appendChild(totalGroup);

          // Add operator
          const divOperator = document.createElement('span');
          divOperator.className = 'operator';
          divOperator.textContent = 'Ã·';
          container.appendChild(divOperator);

          // Show group size
          const groupSizeGroup = document.createElement('div');
          groupSizeGroup.className = 'icon-group';
          for (let i = 0; i < b; i++) {
            const icon = document.createElement('div');
            icon.className = 'helper-icon';
            icon.textContent = 'Icon';
            groupSizeGroup.appendChild(icon);
          }
          container.appendChild(groupSizeGroup);
        }
      }

      // Handle form submissions in exercise screens
      document.addEventListener('submit', (e) => {
        if (!e.target.matches('form')) return;

        const screen = e.target.closest('.screen.active');
        if (!screen) return;

        const route = screen.dataset.screen;
        if (!getGenerator(route)) return; // Not an exercise screen

        e.preventDefault();

        const { questions, currentIndex } = currentExercise;
        if (currentIndex >= questions.length) return;

        const input = e.target.querySelector('input[type="number"]');
        const userAnswer = parseInt(input.value);
        const currentQ = questions[currentIndex];

        if (isNaN(userAnswer)) {
          showCustomModal('Please enter a valid number.');
          return;
        }

        if (userAnswer === currentQ.answer) {
          currentExercise.score++;

          // Flip avatar animation for correct answer
          const avatar = screen.querySelector('.avatar-placeholder');
          if (avatar) {
            avatar.classList.add('avatar-flip');
            setTimeout(() => {
              avatar.classList.remove('avatar-flip');
            }, 600);
          }

          if (currentIndex === 9) {
            // Last question
            setTimeout(() => {
              showCustomModal(`Well done! You got ${currentExercise.score} out of 10 correct!`);
              currentExercise.currentIndex = 10;
              updateExerciseDisplay(route);
            }, 600);
          } else {
            // Next question
            setTimeout(() => {
              currentExercise.currentIndex++;
              updateExerciseDisplay(route);
            }, 600);
          }
        } else {
          showCustomModal('Try again!');
          input.value = '';
        }
      });

      buttons.forEach((button) => {
        button.addEventListener('click', () => {
          const route = button.dataset.route;
          if (route) {
            showScreen(route);
          }
        });
      });

      // ========== AVATAR SELECTION ==========
      document.addEventListener('click', (e) => {
        // Check if clicked on avatar selection button
        if (e.target.matches('.card button.action') && e.target.closest('[data-screen="/settings/avatar"]')) {
          const card = e.target.closest('.card');
          const img = card.querySelector('img');

          if (img && img.src) {
            // Update selected avatar
            selectedAvatar = img.getAttribute('src');

            // Update all avatar buttons in the settings
            const avatarScreen = document.querySelector('[data-screen="/settings/avatar"]');
            const allButtons = avatarScreen.querySelectorAll('.card button');
            allButtons.forEach(btn => {
              btn.textContent = 'Select Avatar';
              btn.classList.remove('selected-avatar');
            });

            // Mark this button as selected
            e.target.textContent = 'Selected âœ“';
            e.target.classList.add('selected-avatar');

            // Update all avatars in the app
            updateAllAvatars();

            // Update border on selected image
            const allImages = avatarScreen.querySelectorAll('.card img');
            allImages.forEach(image => {
              image.style.border = 'none';
            });
            img.style.border = '2px solid #2b2b2b';
          }
        }
      });

      showScreen('/login');
      updateAllAvatars(); // Initialize avatars
    })();
  </script>
</body>
</html>
