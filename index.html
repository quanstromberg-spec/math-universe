<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Math Universe</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Sigmar&display=swap" rel="stylesheet">

  <style>
    /* ========== CSS VARIABLES ========== */
    :root {
      /* Colors */
      --primary-blue: #4A9FE8;
      --primary-blue-hover: #3A8FD8;
      --primary-blue-light: #E8F4FD;
      --success-green: #4CAF50;
      --success-green-hover: #45A049;
      --warning-orange: #FF9800;
      --error-red: #F44336;
      --purple-accent: #9C27B0;

      --bg-main: #F5F7FA;
      --bg-card: #FFFFFF;
      --border-default: #E0E4E8;
      --border-hover: #C8CDD2;
      --text-primary: #1F2937;
      --text-secondary: #6B7280;
      --text-muted: #9CA3AF;

      /* Typography */
      --font-heading: 'Sigmar', 'Comic Sans MS', 'Chalkboard SE', cursive, sans-serif;
      --font-body: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;

      /* Spacing */
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 16px;
      --space-lg: 24px;
      --space-xl: 32px;
      --space-2xl: 48px;
      --space-3xl: 64px;

      /* Border Radius */
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      --radius-full: 9999px;

      /* Shadows */
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
      --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.10);
      --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.12);
      --shadow-xl: 0 16px 32px rgba(0, 0, 0, 0.15);
      --shadow-2xl: 0 24px 48px rgba(0, 0, 0, 0.18);

      /* Transitions */
      --transition-fast: 0.15s;
      --transition-base: 0.2s;
      --transition-slow: 0.3s;
    }

    /* ========== RESET & BASE ========== */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: var(--font-body);
      background: var(--bg-main);
      color: var(--text-primary);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    h1, h2, h3, h4, h5, h6 {
      font-family: var(--font-heading);
      line-height: 1.3;
      letter-spacing: 0.02em;
    }

    /* ========== LAYOUT ========== */
    .app {
      min-height: 100vh;
    }

    main {
      padding: var(--space-xl);
      display: flex;
      flex-direction: column;
      gap: var(--space-lg);
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
    }

    /* ========== SCREEN MANAGEMENT ========== */
    .screen {
      display: none;
      flex-direction: column;
      gap: var(--space-lg);
      animation: fadeIn 0.3s ease;
    }

    .screen.active {
      display: flex;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ========== PANELS & CARDS ========== */
    .panel {
      background: transparent;
      border: none;
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      box-shadow: none;
    }

    .panel h2 {
      font-size: 32px;
      font-weight: 600;
      margin-bottom: var(--space-lg);
      color: var(--text-primary);
    }

    .panel h3 {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: var(--space-md);
    }

    .card {
      background: var(--bg-card);
      border: 2px solid var(--border-default);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      transition: all var(--transition-slow);
    }

    .card:hover {
      border-color: var(--primary-blue);
      box-shadow: 0 8px 20px rgba(74, 159, 232, 0.15);
      transform: translateY(-4px);
    }

    .card strong {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .card span {
      font-size: 14px;
      color: var(--text-secondary);
    }

    /* ========== DIFFICULTY CARDS ========== */
    .difficulty-card {
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
      border: none;
      color: white;
      padding: var(--space-md);
      border-radius: var(--radius-md);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.10);
    }

    .difficulty-card.medium {
      background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    }

    .difficulty-card.hard {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    /* ========== GRID SYSTEM ========== */
    .grid {
      display: grid;
      gap: var(--space-md);
    }

    .grid.columns-2 {
      grid-template-columns: repeat(2, 1fr);
    }

    .grid.columns-3 {
      grid-template-columns: repeat(3, 1fr);
    }

    .grid.columns-4 {
      grid-template-columns: repeat(4, 1fr);
    }

    .layout-row {
      display: flex;
      gap: var(--space-md);
      flex-wrap: wrap;
    }

    /* ========== BUTTONS ========== */
    .btn {
      font-family: var(--font-body);
      font-size: 16px;
      font-weight: 600;
      padding: 12px 32px;
      border-radius: var(--radius-md);
      border: none;
      cursor: pointer;
      transition: all var(--transition-base);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.10);
    }

    .btn:hover {
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-primary {
      background: var(--primary-blue);
      color: white;
    }

    .btn-primary:hover {
      background: var(--primary-blue-hover);
    }

    .btn-secondary {
      background: var(--bg-card);
      color: var(--primary-blue);
      border: 2px solid var(--primary-blue);
    }

    .btn-secondary:hover {
      background: var(--primary-blue-light);
    }

    .btn-success {
      background: var(--success-green);
      color: white;
    }

    .btn-success:hover {
      background: var(--success-green-hover);
    }

    .btn-large {
      padding: 16px 48px;
      font-size: 20px;
      border-radius: var(--radius-lg);
    }

    .btn-small {
      padding: 8px 20px;
      font-size: 14px;
      border-radius: var(--radius-sm);
    }

    .btn.muted {
      background: var(--border-default);
      color: var(--text-muted);
      cursor: not-allowed;
      box-shadow: none;
    }

    .btn.muted:hover {
      transform: none;
      box-shadow: none;
    }

    .action {
      font-family: var(--font-body);
      font-size: 14px;
      font-weight: 600;
      padding: 10px 24px;
      border-radius: var(--radius-md);
      border: none;
      background: var(--primary-blue);
      color: white;
      cursor: pointer;
      transition: all var(--transition-base);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.10);
    }

    .action:hover {
      background: var(--primary-blue-hover);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
    }

    .action.muted {
      background: var(--border-default);
      color: var(--text-muted);
      cursor: not-allowed;
    }

    .action.muted:hover {
      transform: none;
    }

    /* ========== INPUTS ========== */
    input[type="text"],
    input[type="password"],
    input[type="number"] {
      font-family: var(--font-body);
      font-size: 16px;
      padding: 12px 16px;
      border: 2px solid var(--border-default);
      border-radius: var(--radius-sm);
      background: var(--bg-card);
      transition: all var(--transition-base);
      color: var(--text-primary);
      width: 100%;
      max-width: 400px;
    }

    input[type="text"]:focus,
    input[type="password"]:focus,
    input[type="number"]:focus {
      outline: none;
      border-color: var(--primary-blue);
      box-shadow: 0 0 0 3px rgba(74, 159, 232, 0.1);
    }

    /* Hide number input arrows/spinners */
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    input[type="number"] {
      -moz-appearance: textfield;
      appearance: textfield;
    }

    /* ========== PROGRESS BARS ========== */
    .progress {
      width: 100%;
      height: 12px;
      background: var(--border-default);
      border-radius: var(--radius-full);
      overflow: hidden;
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .progress span {
      display: block;
      height: 100%;
      background: linear-gradient(90deg, #4A9FE8 0%, #667eea 100%);
      border-radius: var(--radius-full);
      transition: width 0.3s ease;
    }

    .progress-block {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--space-sm);
      width: 100%;
    }

    .question-progress {
      width: 100%;
      max-width: 400px;
      margin-top: var(--space-md);
    }

    /* ========== AVATARS ========== */
    .avatar-placeholder {
      width: 288px;
      height: 288px;
      border-radius: var(--radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      background: transparent;
      overflow: hidden;
    }

    .avatar-placeholder img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    /* ========== EXERCISE SCREENS ========== */
    .header-bar {
      background: var(--bg-card);
      border: 2px solid var(--border-default);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .exercise-header {
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .header-bar.exercise-header {
      background: transparent;
      border: none;
      box-shadow: none;
    }

    .question-area {
      background: linear-gradient(135deg, #E8F4FD 0%, #F5F7FA 100%);
      border: 3px solid var(--primary-blue);
      border-radius: var(--radius-lg);
      padding: var(--space-2xl);
      display: flex;
      flex-direction: column;
      gap: var(--space-lg);
      align-items: center;
      justify-content: center;
      text-align: center;
      box-shadow: 0 4px 16px rgba(74, 159, 232, 0.12);
    }

    .problem-text {
      font-family: var(--font-body);
      font-size: 36px;
      font-weight: 700;
      letter-spacing: 0.02em;
      color: var(--text-primary);
    }

    .problem-helpers {
      display: flex;
      gap: var(--space-md);
      align-items: center;
      flex-wrap: wrap;
      justify-content: center;
    }

    .icon-group {
      display: flex;
      gap: var(--space-sm);
      flex-wrap: wrap;
      justify-content: center;
    }

    .icon-group.column {
      flex-direction: column;
      align-items: center;
    }

    .operator {
      font-family: var(--font-body);
      font-size: 28px;
      font-weight: 700;
      padding: 0 var(--space-sm);
      color: var(--primary-blue);
    }

    .helper-icon {
      width: 48px;
      height: 48px;
      border: 2px solid var(--primary-blue);
      border-radius: var(--radius-sm);
      background: var(--primary-blue-light);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
      color: var(--primary-blue);
      box-shadow: 0 2px 4px rgba(74, 159, 232, 0.15);
    }

    .helper-icons {
      display: flex;
      gap: var(--space-sm);
      justify-content: center;
    }

    /* ========== FORMS ========== */
    form {
      display: flex;
      gap: var(--space-md);
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
    }

    form input[type="number"] {
      font-family: var(--font-body);
      font-size: 24px;
      font-weight: 600;
      text-align: center;
      width: 200px;
      border: 3px solid var(--primary-blue);
      border-radius: var(--radius-md);
    }

    form input[type="number"]::placeholder {
      font-size: 18px;
      font-weight: 400;
    }

    /* ========== MODALS ========== */
    .custom-modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      animation: fadeIn 0.2s ease;
    }

    .modal-content {
      background: var(--bg-card);
      padding: var(--space-2xl);
      border-radius: 20px;
      text-align: center;
      min-width: 400px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.20);
      animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-content p {
      margin: 0 0 var(--space-lg) 0;
      font-size: 20px;
      font-weight: 700;
      color: var(--text-primary);
      font-family: var(--font-heading);
    }

    .modal-content button {
      padding: 12px 48px;
      font-size: 18px;
      font-weight: 600;
      background: var(--primary-blue);
      color: white;
      border: none;
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--transition-base);
    }

    .modal-content button:hover {
      background: var(--primary-blue-hover);
      transform: scale(1.05);
    }

    /* ========== BREADCRUMB ========== */
    .breadcrumb {
      font-size: 14px;
      color: var(--text-secondary);
      display: flex;
      gap: var(--space-sm);
      flex-wrap: wrap;
      padding: var(--space-md);
      background: transparent;
      border-radius: var(--radius-sm);
      box-shadow: none;
    }

    .breadcrumb span {
      font-weight: 500;
    }

    .breadcrumb span::after {
      content: "/";
      margin-left: var(--space-sm);
      color: var(--text-muted);
    }

    .breadcrumb span:last-child::after {
      content: "";
    }

    /* Icon breadcrumbs - no separator */
    .breadcrumb span.breadcrumb-icon::after {
      content: "" !important;
      margin-left: 0;
    }

    .breadcrumb-icon img {
      display: block;
      transition: transform var(--transition-base);
    }

    .breadcrumb-link.breadcrumb-icon {
      cursor: pointer;
    }

    .breadcrumb-icon:hover img {
      transform: scale(1.2);
    }

    .breadcrumb-link {
      color: var(--primary-blue);
      cursor: pointer;
      font-weight: 600;
    }

    .breadcrumb-link:hover {
      text-decoration: none;
    }

    .home-breadcrumb {
      justify-content: space-between;
      align-items: center;
    }

    /* ========== LISTS ========== */
    .list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: var(--space-sm);
      font-size: 14px;
    }

    .list li {
      padding: var(--space-sm) var(--space-md);
      background: var(--bg-main);
      border-radius: var(--radius-sm);
      border-left: 3px solid var(--primary-blue);
    }

    /* ========== ANIMATIONS ========== */
    @keyframes flip {
      0% { transform: rotateY(0deg); }
      100% { transform: rotateY(360deg); }
    }

    .avatar-flip {
      animation: flip 0.6s ease-in-out;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    @keyframes starPop {
      0% {
        transform: scale(0) rotate(0deg);
        opacity: 0;
      }
      50% {
        transform: scale(1.2) rotate(180deg);
        opacity: 1;
      }
      100% {
        transform: scale(1) rotate(360deg);
        opacity: 1;
      }
    }

    /* ========== LOGIN PAGE SPECIFIC ========== */
    .login-container {
      max-width: 600px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: var(--space-2xl);
      padding: var(--space-2xl);
    }

    .welcome-section {
      text-align: center;
      padding: var(--space-xl);
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: var(--radius-xl);
      color: white;
      box-shadow: var(--shadow-lg);
    }

    .welcome-section h1 {
      font-size: 48px;
      margin: 0 0 var(--space-sm) 0;
      font-weight: 700;
    }

    .welcome-section h2 {
      font-size: 28px;
      margin: 0;
      font-weight: 400;
      opacity: 0.9;
    }

    .name-input-section {
      text-align: center;
    }

    .name-input-section h3 {
      font-size: 24px;
      margin: 0 0 var(--space-md) 0;
      font-weight: 600;
    }

    .avatar-selection-section {
      text-align: center;
    }

    .avatar-selection-section h3 {
      font-size: 24px;
      margin: 0 0 var(--space-lg) 0;
      font-weight: 600;
    }

    .avatar-card {
      background: var(--bg-card);
      border: 3px solid transparent;
      border-radius: var(--radius-lg);
      padding: var(--space-md);
      cursor: pointer;
      transition: all var(--transition-slow);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .avatar-card:hover {
      border-color: var(--primary-blue);
      transform: translateY(-8px);
      box-shadow: 0 12px 24px rgba(74, 159, 232, 0.2);
    }

    .avatar-card.selected {
      border-color: var(--primary-blue);
      background: var(--primary-blue-light);
    }

    .avatar-card img {
      width: 100%;
      height: 150px;
      object-fit: contain;
      margin-bottom: var(--space-sm);
    }

    .avatar-card div {
      text-align: center;
      font-family: var(--font-body);
      font-weight: 600;
      font-size: 16px;
      color: var(--text-primary);
    }

    /* ========== RESPONSIVE ========== */
    @media (max-width: 1024px) {
      .grid.columns-3 {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 640px) {
      main {
        padding: var(--space-md);
      }

      .grid.columns-2,
      .grid.columns-3 {
        grid-template-columns: 1fr;
      }

      .card {
        padding: var(--space-md);
      }

      .problem-text {
        font-size: 28px;
      }

      .avatar-placeholder {
        width: 128px;
        height: 128px;
      }

      .modal-content {
        min-width: 300px;
        padding: var(--space-lg);
      }

      .welcome-section h1 {
        font-size: 36px;
      }

      .welcome-section h2 {
        font-size: 20px;
      }
    }

    /* ========== STAT BLOCKS ========== */
    .stat-block {
      border: 2px solid var(--border-default);
      border-radius: var(--radius-md);
      padding: var(--space-md);
      display: flex;
      flex-direction: column;
      gap: var(--space-xs);
      font-size: 14px;
      min-width: 200px;
      background: var(--bg-card);
      box-shadow: var(--shadow-sm);
    }

    /* ========== FOOTER ========== */
    .footer {
      margin-top: var(--space-2xl);
      padding: var(--space-lg);
      text-align: center;
      font-size: 12px;
      color: var(--text-muted);
      border-top: 1px solid var(--border-default);
    }
  </style>
</head>
<body>
  <div class="app">
    <main>
      <!-- LOGIN SCREEN -->
      <section class="screen active" data-screen="/login">
        <div class="login-container">
          <!-- Section 1: Welcome -->
          <div class="welcome-section">
            <h2>Welcome to Math Universe</h2>
          </div>

          <!-- Section 2: Name Input -->
          <div class="name-input-section">
            <h3>What's your name?</h3>
            <input type="text" id="user-name-input" placeholder="Enter your name" />
          </div>

          <!-- Section 3: Choose Avatar -->
          <div class="avatar-selection-section">
            <h3>Choose your Avatar</h3>
            <div class="grid columns-3" id="intro-avatar-selection">
              <div class="avatar-card selected" data-avatar="images/roblox.png">
                <img src="images/roblox.png" alt="Roblox Avatar">
                <div>Roblox</div>
              </div>
              <div class="avatar-card" data-avatar="images/minecraft.png">
                <img src="images/minecraft.png" alt="Minecraft Avatar">
                <div>Minecraft</div>
              </div>
              <div class="avatar-card" data-avatar="images/Bamse.png">
                <img src="images/Bamse.png" alt="Bamse Avatar">
                <div>Bamse</div>
              </div>
            </div>
          </div>

          <!-- Section 4: Get Started Button -->
          <div style="text-align: center;">
            <button id="get-started-btn" class="btn btn-primary btn-large">
              Let's Get Started! 🚀
            </button>
          </div>
        </div>
      </section>

      <!-- HOME SCREEN -->
      <section class="screen" data-screen="/home">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div style="margin-top: var(--space-md);">
            <div style="font-size: 32px; font-weight: 700; font-family: var(--font-heading);">Hi </div>
          </div>
        </div>

        <div class="panel">
          <h3>Choose a math adventure!</h3>
          <div class="grid columns-2">
            <div class="card">
              <strong>Addition <img src="icons/plus.svg" alt="plus" style="width: 24px; height: 24px; vertical-align: middle; display: inline-block;"></strong>
              <span>Practice combining numbers.</span>
              <div class="grid columns-3">
                <button class="action" data-route="/home/addition/easy">Easy</button>
                <button class="action" data-route="/home/addition/medium">Medium</button>
                <button class="action" data-route="/home/addition/hard">Hard</button>
              </div>
            </div>

            <div class="card">
              <strong>Subtraction <img src="icons/minus.svg" alt="minus" style="width: 24px; height: 24px; vertical-align: middle; display: inline-block;"></strong>
              <span>Practice taking away.</span>
              <div class="grid columns-3">
                <button class="action" data-route="/home/subtraction/easy">Easy</button>
                <button class="action" data-route="/home/subtraction/medium">Medium</button>
                <button class="action" data-route="/home/subtraction/hard">Hard</button>
              </div>
            </div>

            <div class="card">
              <strong>Multiplication <img src="icons/multiple.svg" alt="multiply" style="width: 24px; height: 24px; vertical-align: middle; display: inline-block;"></strong>
              <span>Practice repeated addition.</span>
              <div class="grid columns-3">
                <button class="action" data-route="/home/multiplication/easy">Easy</button>
                <button class="action" data-route="/home/multiplication/medium">Medium</button>
                <button class="action" data-route="/home/multiplication/hard">Hard</button>
              </div>
            </div>

            <div class="card">
              <strong>Division <img src="icons/devide.svg" alt="divide" style="width: 24px; height: 24px; vertical-align: middle; display: inline-block;"></strong>
              <span>Practice sharing equally.</span>
              <div class="grid columns-3">
                <button class="action" data-route="/home/division/easy">Easy</button>
                <button class="action" data-route="/home/division/medium">Medium</button>
                <button class="action muted" data-route="/home/division/hard">Hard</button>
              </div>
            </div>
          </div>
        </div>

        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- ADDITION OVERVIEW -->
      <section class="screen" data-screen="/home/addition">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>
        <div class="panel">
          <h2>Addition Levels</h2>
          <ul class="list">
            <li>Easy: a + b ≤ 10, a and b ∈ [5, 9]</li>
            <li>Medium: a + b ≤ 30, a ∈ [5, 14], b ∈ [5, 15]</li>
            <li>Hard: a + b ≤ 100</li>
          </ul>
          <div class="grid columns-3" style="margin-top: var(--space-lg);">
            <button class="btn btn-success" data-route="/home/addition/easy">Start Easy</button>
            <button class="btn btn-primary" data-route="/home/addition/medium">Start Medium</button>
            <button class="btn btn-secondary" data-route="/home/addition/hard">Start Hard</button>
          </div>
        </div>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- ADDITION EASY -->
      <section class="screen" data-screen="/home/addition/easy">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div style="font-size: 18px; font-weight: 600;">Question 1 of 10</div>
            <div class="progress question-progress"><span style="width: 10%;"></span></div>
          </div>
        </div>

        <div class="question-area">
          <div class="problem-text">5 + 3 = ?</div>
          <div class="problem-helpers">
            <div class="icon-group">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
            </div>
            <span class="operator">+</span>
            <div class="icon-group">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
            </div>
          </div>
        </div>

        <form>
          <input type="number" placeholder="Type here" />
          <button class="btn btn-primary">Submit Answer 🚀</button>
        </form>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- ADDITION MEDIUM -->
      <section class="screen" data-screen="/home/addition/medium">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div style="font-size: 18px; font-weight: 600;">Question 1 of 10</div>
            <div class="progress question-progress"><span style="width: 10%;"></span></div>
          </div>
        </div>

        <div class="question-area">
          <div class="problem-text">9 + 5 = ?</div>
        </div>

        <form>
          <input type="number" placeholder="Type here" />
          <button class="btn btn-primary">Submit Answer 🚀</button>
        </form>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- ADDITION HARD -->
      <section class="screen" data-screen="/home/addition/hard">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div style="font-size: 18px; font-weight: 600;">Question 1 of 10</div>
            <div class="progress question-progress"><span style="width: 10%;"></span></div>
          </div>
        </div>

        <div class="question-area">
          <div class="problem-text">35 + 47 = ?</div>
        </div>

        <form>
          <input type="number" placeholder="Type here" />
          <button class="btn btn-primary">Submit Answer 🚀</button>
        </form>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- SUBTRACTION OVERVIEW -->
      <section class="screen" data-screen="/home/subtraction">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>
        <div class="panel">
          <h2>Subtraction Levels</h2>
          <ul class="list">
            <li>Easy: a − b, a ≤ 10, result ≥ 0</li>
            <li>Medium: a − b, a and b are two-digit numbers > 20 and > 10</li>
            <li>Hard: a − b − c, a is a two-digit number > 20, result ≥ 0</li>
          </ul>
          <div class="grid columns-3" style="margin-top: var(--space-lg);">
            <button class="btn btn-success" data-route="/home/subtraction/easy">Start Easy</button>
            <button class="btn btn-primary" data-route="/home/subtraction/medium">Start Medium</button>
            <button class="btn btn-secondary" data-route="/home/subtraction/hard">Start Hard</button>
          </div>
        </div>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- SUBTRACTION EASY -->
      <section class="screen" data-screen="/home/subtraction/easy">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div style="font-size: 18px; font-weight: 600;">Question 1 of 10</div>
            <div class="progress question-progress"><span style="width: 10%;"></span></div>
          </div>
        </div>

        <div class="question-area">
          <div class="problem-text">9 − 4 = ?</div>
          <div class="problem-helpers">
            <div class="icon-group">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
            </div>
            <span class="operator">−</span>
            <div class="icon-group">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
            </div>
          </div>
        </div>

        <form>
          <input type="number" placeholder="Type here" />
          <button class="btn btn-primary">Submit Answer 🚀</button>
        </form>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- SUBTRACTION MEDIUM -->
      <section class="screen" data-screen="/home/subtraction/medium">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div style="font-size: 18px; font-weight: 600;">Question 1 of 10</div>
            <div class="progress question-progress"><span style="width: 10%;"></span></div>
          </div>
        </div>

        <div class="question-area">
          <div class="problem-text">40 − 18 = ?</div>
        </div>

        <form>
          <input type="number" placeholder="Type here" />
          <button class="btn btn-primary">Submit Answer 🚀</button>
        </form>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- SUBTRACTION HARD -->
      <section class="screen" data-screen="/home/subtraction/hard">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div style="font-size: 18px; font-weight: 600;">Question 1 of 10</div>
            <div class="progress question-progress"><span style="width: 10%;"></span></div>
          </div>
        </div>

        <div class="question-area">
          <div class="problem-text">60 − 20 − 15 = ?</div>
        </div>

        <form>
          <input type="number" placeholder="Type here" />
          <button class="btn btn-primary">Submit Answer 🚀</button>
        </form>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- MULTIPLICATION OVERVIEW -->
      <section class="screen" data-screen="/home/multiplication">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>
        <div class="panel">
          <h2>Multiplication Levels</h2>
          <ul class="list">
            <li>Easy: a × b, a and b ∈ [1, 4]</li>
            <li>Medium: a × b, a and b ∈ [6, 9]</li>
            <li>Hard: a × b, a ∈ [10, 99] (two-digit multiples of ten), b ∈ [2, 9]</li>
          </ul>
          <div class="grid columns-3" style="margin-top: var(--space-lg);">
            <button class="btn btn-success" data-route="/home/multiplication/easy">Start Easy</button>
            <button class="btn btn-primary" data-route="/home/multiplication/medium">Start Medium</button>
            <button class="btn btn-secondary" data-route="/home/multiplication/hard">Start Hard</button>
          </div>
        </div>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- MULTIPLICATION EASY -->
      <section class="screen" data-screen="/home/multiplication/easy">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div style="font-size: 18px; font-weight: 600;">Question 1 of 10</div>
            <div class="progress question-progress"><span style="width: 10%;"></span></div>
          </div>
        </div>

        <div class="question-area">
          <div class="problem-text">2 × 3 = ?</div>
          <div class="problem-helpers">
            <div class="icon-group">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
            </div>
            <span class="operator">×</span>
            <div class="icon-group">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
            </div>
          </div>
        </div>

        <form>
          <input type="number" placeholder="Type here" />
          <button class="btn btn-primary">Submit Answer 🚀</button>
        </form>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- MULTIPLICATION MEDIUM -->
      <section class="screen" data-screen="/home/multiplication/medium">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div style="font-size: 18px; font-weight: 600;">Question 1 of 10</div>
            <div class="progress question-progress"><span style="width: 10%;"></span></div>
          </div>
        </div>

        <div class="question-area">
          <div class="problem-text">7 × 8 = ?</div>
        </div>

        <form>
          <input type="number" placeholder="Type here" />
          <button class="btn btn-primary">Submit Answer 🚀</button>
        </form>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- MULTIPLICATION HARD -->
      <section class="screen" data-screen="/home/multiplication/hard">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div style="font-size: 18px; font-weight: 600;">Question 1 of 10</div>
            <div class="progress question-progress"><span style="width: 10%;"></span></div>
          </div>
        </div>

        <div class="question-area">
          <div class="problem-text">40 × 6 = ?</div>
        </div>

        <form>
          <input type="number" placeholder="Type here" />
          <button class="btn btn-primary">Submit Answer 🚀</button>
        </form>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- DIVISION OVERVIEW -->
      <section class="screen" data-screen="/home/division">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>
        <div class="panel">
          <h2>Division Levels</h2>
          <ul class="list">
            <li>Easy: a ÷ b, a from 9×9 multiplication table, b ∈ [2, 4]</li>
            <li>Medium: a ÷ b, a from 9×9 multiplication table, b ∈ [6, 9]</li>
            <li>Hard: Not available (route retained, disabled)</li>
          </ul>
          <div class="grid columns-3" style="margin-top: var(--space-lg);">
            <button class="btn btn-success" data-route="/home/division/easy">Start Easy</button>
            <button class="btn btn-primary" data-route="/home/division/medium">Start Medium</button>
            <button class="btn muted" data-route="/home/division/hard">Hard</button>
          </div>
        </div>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- DIVISION EASY -->
      <section class="screen" data-screen="/home/division/easy">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div style="font-size: 18px; font-weight: 600;">Question 1 of 10</div>
            <div class="progress question-progress"><span style="width: 10%;"></span></div>
          </div>
        </div>

        <div class="question-area">
          <div class="problem-text">24 ÷ 3 = ?</div>
          <div class="problem-helpers">
            <div class="icon-group">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
            </div>
            <span class="operator">÷</span>
            <div class="icon-group">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
              <img src="icons/coins.svg" alt="helper" style="width: 48px; height: 48px;">
            </div>
          </div>
        </div>

        <form>
          <input type="number" placeholder="Type here" />
          <button class="btn btn-primary">Submit Answer 🚀</button>
        </form>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- DIVISION MEDIUM -->
      <section class="screen" data-screen="/home/division/medium">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="header-bar exercise-header">
          <div class="avatar-placeholder">Avatar</div>
          <div class="progress-block">
            <div style="font-size: 18px; font-weight: 600;">Question 1 of 10</div>
            <div class="progress question-progress"><span style="width: 10%;"></span></div>
          </div>
        </div>

        <div class="question-area">
          <div class="problem-text">72 ÷ 8 = ?</div>
        </div>

        <form>
          <input type="number" placeholder="Type here" />
          <button class="btn btn-primary">Submit Answer 🚀</button>
        </form>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- DIVISION HARD (DISABLED) -->
      <section class="screen" data-screen="/home/division/hard">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="panel" style="text-align: center;">
          <h2>Division Hard</h2>
          <p style="color: var(--text-secondary); margin: var(--space-lg) 0;">This route is reserved and remains disabled according to the PRD.</p>
          <button class="btn btn-secondary" data-route="/home/division">Return to division levels</button>
        </div>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- SETTINGS -->
      <section class="screen" data-screen="/settings">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="panel">
          <h2>Settings</h2>
          <p style="color: var(--text-secondary); margin-bottom: var(--space-lg);">Update avatar, helper icons, and review learning statistics.</p>

          <div class="grid columns-3" style="margin-bottom: var(--space-lg);">
            <button class="btn btn-primary" data-route="/settings/avatar">Avatar library</button>
            <button class="btn btn-primary" data-route="/settings/icons">Helper icon library</button>
            <button class="btn muted">My stats</button>
          </div>
        </div>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- SETTINGS - AVATAR -->
      <section class="screen" data-screen="/settings/avatar">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="panel">
          <h2>Avatar Library</h2>
          <p style="color: var(--text-secondary); margin-bottom: var(--space-lg);">Choose an avatar. Selection updates the exercise header immediately.</p>

          <div class="grid columns-3" style="margin-bottom: var(--space-lg);">
            <div class="card" style="align-items: center;">
              <img src="images/roblox.png" alt="Roblox Avatar" style="width: 100%; height: 200px; object-fit: contain; border: 3px solid var(--primary-blue); border-radius: var(--radius-md);">
              <button class="btn btn-success selected-avatar">Selected ✓</button>
            </div>

            <div class="card" style="align-items: center;">
              <img src="images/minecraft.png" alt="Minecraft Avatar" style="width: 100%; height: 200px; object-fit: contain; border-radius: var(--radius-md);">
              <button class="btn btn-secondary">Select Avatar</button>
            </div>

            <div class="card" style="align-items: center;">
              <img src="images/Bamse.png" alt="Bamse Avatar" style="width: 100%; height: 200px; object-fit: contain; border-radius: var(--radius-md);">
              <button class="btn btn-secondary">Select Avatar</button>
            </div>
          </div>
        </div>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- SETTINGS - ICONS -->
      <section class="screen" data-screen="/settings/icons">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="panel">
          <h2>Helper Icon Library</h2>
          <p style="color: var(--text-secondary); margin-bottom: var(--space-lg);">Select quantity helper icons used in Easy levels.</p>

          <div class="grid columns-3" style="margin-bottom: var(--space-lg);">
            <div class="card" style="align-items: center;">
              <div class="helper-icons">
                <img src="icons/coins.svg" alt="coins" style="width: 48px; height: 48px;">
                <img src="icons/coins.svg" alt="coins" style="width: 48px; height: 48px;">
                <img src="icons/coins.svg" alt="coins" style="width: 48px; height: 48px;">
              </div>
              <button class="btn btn-success">Selected ✓</button>
            </div>

            <div class="card" style="align-items: center;">
              <div class="helper-icons">
                <img src="icons/honey.svg" alt="honey" style="width: 48px; height: 48px;">
                <img src="icons/honey.svg" alt="honey" style="width: 48px; height: 48px;">
                <img src="icons/honey.svg" alt="honey" style="width: 48px; height: 48px;">
              </div>
              <button class="btn btn-primary">Use set</button>
            </div>

            <div class="card" style="align-items: center;">
              <div class="helper-icons">
                <img src="icons/tnt.svg" alt="tnt" style="width: 48px; height: 48px;">
                <img src="icons/tnt.svg" alt="tnt" style="width: 48px; height: 48px;">
                <img src="icons/tnt.svg" alt="tnt" style="width: 48px; height: 48px;">
              </div>
              <button class="btn btn-primary">Use set</button>
            </div>
          </div>
        </div>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>

      <!-- SETTINGS - STATS -->
      <section class="screen" data-screen="/settings/stats">
        <div class="breadcrumb home-breadcrumb">
          <span data-route="/home" class="breadcrumb-link breadcrumb-icon" style="font-family: var(--font-heading); color: #4a9fe8; font-size: 20px; font-weight: 700;">Math Universe</span>
          <span data-route="/settings" class="breadcrumb-link breadcrumb-icon"><img src="icons/setting.svg" alt="settings" style="width: 30px; height: 30px; vertical-align: middle;"></span>
        </div>

        <div class="panel">
          <h2>My Stats</h2>

          <div class="layout-row" style="margin-bottom: var(--space-lg);">
            <div class="card" style="flex: 1;">
              <strong style="color: var(--primary-blue); font-size: 20px;">Today</strong>
              <ul class="list">
                <li><strong>Addition:</strong> 10 questions</li>
                <li><strong>Subtraction:</strong> 2 questions</li>
                <li><strong>Multiplication:</strong> 0 questions</li>
                <li><strong>Division:</strong> 0 questions</li>
              </ul>
            </div>

            <div class="card" style="flex: 1;">
              <strong style="color: var(--success-green); font-size: 20px;">This Week</strong>
              <ul class="list">
                <li><strong>Addition:</strong> 24 questions</li>
                <li><strong>Subtraction:</strong> 12 questions</li>
                <li><strong>Multiplication:</strong> 6 questions</li>
                <li><strong>Division:</strong> 0 questions</li>
              </ul>
            </div>
          </div>

          <p style="font-size: 12px; color: var(--text-muted); margin-bottom: var(--space-lg);">Stats follow the rule of 10 questions per completed level.</p>
        </div>
        <div class="footer">
          © 2025 All rights reserved. This page is for private use only.
        </div>
      </section>
    </main>
  </div>

  <script>
    (function () {
      const buttons = document.querySelectorAll('[data-route]');
      const screens = document.querySelectorAll('.screen');
      const routeLabel = document.getElementById('current-route');

      // ========== QUESTION GENERATORS ==========
      function randomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

      // Addition generators
      function generateAdditionEasy() {
        const validPairs = [];
        for (let a = 1; a <= 9; a++) {
          for (let b = 1; b <= 9; b++) {
            if (a + b <= 10) validPairs.push([a, b]);
          }
        }
        return shuffleAndCreate(validPairs, '+');
      }

      function generateAdditionMedium() {
        const validPairs = [];
        for (let a = 5; a <= 14; a++) {
          for (let b = 5; b <= 15; b++) {
            if (a + b <= 30) validPairs.push([a, b]);
          }
        }
        return shuffleAndCreate(validPairs, '+');
      }

      function generateAdditionHard() {
        const questions = [];
        for (let i = 0; i < 10; i++) {
          const a = randomInt(1, 99);
          const b = randomInt(1, 100 - a);
          questions.push({ q: `${a} + ${b}`, answer: a + b });
        }
        return questions;
      }

      // Subtraction generators
      function generateSubtractionEasy() {
        const questions = [];
        for (let i = 0; i < 10; i++) {
          const a = randomInt(1, 10);
          const b = randomInt(0, a);
          questions.push({ q: `${a} − ${b}`, answer: a - b });
        }
        return questions;
      }

      function generateSubtractionMedium() {
        const questions = [];
        for (let i = 0; i < 10; i++) {
          const a = randomInt(21, 99);
          const b = randomInt(11, Math.min(a, 99));
          questions.push({ q: `${a} − ${b}`, answer: a - b });
        }
        return questions;
      }

      function generateSubtractionHard() {
        const questions = [];
        for (let i = 0; i < 10; i++) {
          const a = randomInt(21, 99);
          const b = randomInt(1, Math.floor(a / 2));
          const c = randomInt(1, a - b);
          questions.push({ q: `${a} − ${b} − ${c}`, answer: a - b - c });
        }
        return questions;
      }

      // Multiplication generators
      function generateMultiplicationEasy() {
        const validPairs = [];
        for (let a = 1; a <= 4; a++) {
          for (let b = 1; b <= 4; b++) {
            validPairs.push([a, b]);
          }
        }
        return shuffleAndCreate(validPairs, '×');
      }

      function generateMultiplicationMedium() {
        const validPairs = [];
        for (let a = 6; a <= 9; a++) {
          for (let b = 6; b <= 9; b++) {
            validPairs.push([a, b]);
          }
        }
        return shuffleAndCreate(validPairs, '×');
      }

      function generateMultiplicationHard() {
        const questions = [];
        for (let i = 0; i < 10; i++) {
          const a = randomInt(10, 99);
          const b = randomInt(2, 9);
          questions.push({ q: `${a} × ${b}`, answer: a * b });
        }
        return questions;
      }

      // Division generators
      function generateDivisionEasy() {
        const multTable = getMultiplicationTable();
        const questions = [];
        for (let i = 0; i < 10; i++) {
          const b = randomInt(2, 4);
          let a;
          do {
            a = multTable[randomInt(0, multTable.length - 1)];
          } while (a % b !== 0);
          questions.push({ q: `${a} ÷ ${b}`, answer: a / b });
        }
        return questions;
      }

      function generateDivisionMedium() {
        const multTable = getMultiplicationTable();
        const questions = [];
        for (let i = 0; i < 10; i++) {
          const b = randomInt(6, 9);
          let a;
          do {
            a = multTable[randomInt(0, multTable.length - 1)];
          } while (a % b !== 0);
          questions.push({ q: `${a} ÷ ${b}`, answer: a / b });
        }
        return questions;
      }

      function getMultiplicationTable() {
        const table = [];
        for (let i = 1; i <= 9; i++) {
          for (let j = 1; j <= 9; j++) {
            table.push(i * j);
          }
        }
        return [...new Set(table)];
      }

      function shuffleAndCreate(pairs, operator) {
        const shuffled = pairs.sort(() => Math.random() - 0.5);
        const questions = [];
        for (let i = 0; i < Math.min(10, shuffled.length); i++) {
          const [a, b] = shuffled[i];
          let answer;
          if (operator === '+') answer = a + b;
          else if (operator === '×') answer = a * b;
          questions.push({ q: `${a} ${operator} ${b}`, answer });
        }
        return questions;
      }

      // Get generator function based on route
      function getGenerator(route) {
        const generators = {
          '/home/addition/easy': generateAdditionEasy,
          '/home/addition/medium': generateAdditionMedium,
          '/home/addition/hard': generateAdditionHard,
          '/home/subtraction/easy': generateSubtractionEasy,
          '/home/subtraction/medium': generateSubtractionMedium,
          '/home/subtraction/hard': generateSubtractionHard,
          '/home/multiplication/easy': generateMultiplicationEasy,
          '/home/multiplication/medium': generateMultiplicationMedium,
          '/home/multiplication/hard': generateMultiplicationHard,
          '/home/division/easy': generateDivisionEasy,
          '/home/division/medium': generateDivisionMedium,
        };
        return generators[route] || null;
      }

      // ========== EXERCISE STATE ==========
      let currentExercise = {
        questions: [],
        currentIndex: 0,
        score: 0,
        route: null
      };

      // ========== AVATAR STATE ==========
      let selectedAvatar = 'images/roblox.png';
      let userName = '';
      let selectedHelperIcon = 'icons/coins.svg';

      function updateAllAvatars() {
        const avatarElements = document.querySelectorAll('.avatar-placeholder');
        avatarElements.forEach(avatar => {
          avatar.innerHTML = `<img src="${selectedAvatar}" alt="Avatar" style="width: 100%; height: 100%; object-fit: contain;">`;
        });
      }

      function updateAllHelperIcons() {
        const helperIconContainers = document.querySelectorAll('.problem-helpers');
        helperIconContainers.forEach(container => {
          const icons = container.querySelectorAll('img');
          icons.forEach(icon => {
            icon.src = selectedHelperIcon;
          });
        });
      }

      function updateUserName() {
        const homeGreeting = document.querySelector('[data-screen="/home"] .header-bar.exercise-header div div');
        if (homeGreeting && userName) {
          homeGreeting.textContent = `Hi ${userName}!`;
        }
      }

      // ========== INTRO PAGE AVATAR SELECTION ==========
      document.addEventListener('click', (e) => {
        const card = e.target.closest('#intro-avatar-selection .avatar-card');
        if (card) {
          const avatarPath = card.dataset.avatar;
          if (avatarPath) {
            selectedAvatar = avatarPath;

            // Set corresponding helper icon based on avatar
            if (avatarPath.includes('roblox')) {
              selectedHelperIcon = 'icons/coins.svg';
            } else if (avatarPath.includes('minecraft')) {
              selectedHelperIcon = 'icons/tnt.svg';
            } else if (avatarPath.includes('Bamse')) {
              selectedHelperIcon = 'icons/honey.svg';
            }

            // Update selection state
            const allCards = document.querySelectorAll('#intro-avatar-selection .avatar-card');
            allCards.forEach(c => c.classList.remove('selected'));
            card.classList.add('selected');
          }
        }
      });

      // ========== GET STARTED BUTTON ==========
      document.getElementById('get-started-btn')?.addEventListener('click', () => {
        const nameInput = document.getElementById('user-name-input');
        userName = nameInput?.value.trim() || 'Friend';

        updateAllAvatars();
        showScreen('/home');
      });

      // ========== CUSTOM MODAL ==========
      function showCustomModal(message) {
        const modal = document.createElement('div');
        modal.className = 'custom-modal';

        const content = document.createElement('div');
        content.className = 'modal-content';

        const text = document.createElement('p');
        text.textContent = message;

        const button = document.createElement('button');
        button.textContent = 'OK';
        button.onclick = () => {
          document.body.removeChild(modal);
        };

        content.appendChild(text);
        content.appendChild(button);
        modal.appendChild(content);
        document.body.appendChild(modal);
      }

      function showScreen(route) {
        screens.forEach((screen) => {
          screen.classList.toggle('active', screen.dataset.screen === route);
        });
        if (routeLabel) {
          routeLabel.textContent = 'Current: ' + route;
        }

        updateAllAvatars();

        // Update username on home page
        if (route === '/home') {
          updateUserName();
        }

        // Update icon selection UI when navigating to icons page
        if (route === '/settings/icons') {
          updateIconSelectionUI();
        }

        const generator = getGenerator(route);
        if (generator) {
          initExercise(route, generator);
        }
      }

      function updateIconSelectionUI() {
        const iconScreen = document.querySelector('[data-screen="/settings/icons"]');
        if (!iconScreen) return;

        const allButtons = iconScreen.querySelectorAll('.card button');
        const allCards = iconScreen.querySelectorAll('.card');

        allCards.forEach((card, index) => {
          const firstIcon = card.querySelector('.helper-icons img');
          const button = card.querySelector('button');

          if (firstIcon && button) {
            if (firstIcon.getAttribute('src') === selectedHelperIcon) {
              button.textContent = 'Selected ✓';
              button.className = 'btn btn-success';
            } else {
              button.textContent = 'Use set';
              button.className = 'btn btn-primary';
            }
          }
        });
      }

      function initExercise(route, generator) {
        currentExercise = {
          questions: generator(),
          currentIndex: 0,
          score: 0,
          route: route
        };
        updateExerciseDisplay(route);
      }

      function updateExerciseDisplay(route) {
        const screen = document.querySelector(`[data-screen="${route}"]`);
        if (!screen) return;

        const { questions, currentIndex, score } = currentExercise;
        const currentQ = questions[currentIndex];
        const isComplete = currentIndex >= 10;

        const questionArea = screen.querySelector('.question-area');
        if (questionArea) {
          const problemText = questionArea.querySelector('.problem-text');
          if (problemText) {
            problemText.textContent = isComplete ? `🎉 All questions finished!` : `${currentQ.q} = ?`;
          } else {
            questionArea.textContent = isComplete ? `🎉 All questions finished!` : `${currentQ.q} = ?`;
          }

          const problemHelpers = questionArea.querySelector('.problem-helpers');
          if (problemHelpers) {
            if (isComplete) {
              problemHelpers.style.display = 'none';
            } else if (currentQ) {
              updateHelperIcons(problemHelpers, currentQ.q, route);
            }
          }
        }

        const progressBlock = screen.querySelector('.progress-block');
        if (progressBlock) {
          const progressText = progressBlock.querySelector('div');
          if (progressText) {
            progressText.textContent = `Question ${Math.min(currentIndex + 1, 10)} of 10`;
          }
        }

        const progressBar = screen.querySelector('.progress');
        if (progressBar) {
          const progressFill = progressBar.querySelector('span');
          if (progressFill) {
            progressFill.style.width = `${Math.min(((currentIndex + 1) / 10) * 100, 100)}%`;
          }
        }

        const form = screen.querySelector('form');
        if (form) {
          if (isComplete) {
            form.style.display = 'none';

            let completionDiv = screen.querySelector('.completion-buttons');
            if (!completionDiv) {
              completionDiv = document.createElement('div');
              completionDiv.className = 'completion-buttons';
              completionDiv.style.cssText = 'display: flex; gap: 16px; justify-content: center; margin-top: 24px;';

              const startOverBtn = document.createElement('button');
              startOverBtn.className = 'btn btn-secondary';
              startOverBtn.textContent = 'Start Over';
              startOverBtn.onclick = () => {
                initExercise(route, getGenerator(route));
              };

              const homeBtn = document.createElement('button');
              homeBtn.className = 'btn btn-primary';
              homeBtn.textContent = 'Return to Home Page';
              homeBtn.onclick = () => {
                showScreen('/home');
              };

              completionDiv.appendChild(startOverBtn);
              completionDiv.appendChild(homeBtn);
              form.parentNode.insertBefore(completionDiv, form.nextSibling);
            }
            completionDiv.style.display = 'flex';
          } else {
            form.style.display = 'flex';
            const completionDiv = screen.querySelector('.completion-buttons');
            if (completionDiv) {
              completionDiv.style.display = 'none';
            }

            const input = form.querySelector('input[type="number"]');
            if (input) {
              input.value = '';
              input.disabled = false;
            }
          }
        }
      }

      function updateHelperIcons(container, questionText, route) {
        if (!route.includes('/easy')) {
          container.style.display = 'none';
          return;
        }
        container.style.display = 'flex';

        const numbers = questionText.match(/\d+/g);
        if (!numbers || numbers.length < 2) return;

        const a = parseInt(numbers[0]);
        const b = parseInt(numbers[1]);

        // Only show helper icons if a <= 25
        if (a > 25) {
          container.style.display = 'none';
          return;
        }
        const operator = questionText.includes('+') ? '+' :
                        questionText.includes('−') ? '−' :
                        questionText.includes('×') ? '×' :
                        questionText.includes('÷') ? '÷' : '+';

        container.innerHTML = '';

        const iconGroup1 = document.createElement('div');
        iconGroup1.className = 'icon-group';
        for (let i = 0; i < a; i++) {
          const icon = document.createElement('img');
          icon.src = selectedHelperIcon;
          icon.alt = 'helper';
          icon.style.cssText = 'width: 48px; height: 48px;';
          iconGroup1.appendChild(icon);
        }
        container.appendChild(iconGroup1);

        const operatorSpan = document.createElement('span');
        operatorSpan.className = 'operator';
        operatorSpan.textContent = operator;
        container.appendChild(operatorSpan);

        const iconGroup2 = document.createElement('div');
        iconGroup2.className = 'icon-group';
        for (let i = 0; i < b; i++) {
          const icon = document.createElement('img');
          icon.src = selectedHelperIcon;
          icon.alt = 'helper';
          icon.style.cssText = 'width: 48px; height: 48px;';
          iconGroup2.appendChild(icon);
        }
        container.appendChild(iconGroup2);

        if (operator === '÷') {
          container.innerHTML = '';

          const totalGroup = document.createElement('div');
          totalGroup.className = 'icon-group';
          for (let i = 0; i < a; i++) {
            const icon = document.createElement('img');
            icon.src = selectedHelperIcon;
            icon.alt = 'helper';
            icon.style.cssText = 'width: 48px; height: 48px;';
            totalGroup.appendChild(icon);
          }
          container.appendChild(totalGroup);

          const divOperator = document.createElement('span');
          divOperator.className = 'operator';
          divOperator.textContent = '÷';
          container.appendChild(divOperator);

          const groupSizeGroup = document.createElement('div');
          groupSizeGroup.className = 'icon-group';
          for (let i = 0; i < b; i++) {
            const icon = document.createElement('img');
            icon.src = selectedHelperIcon;
            icon.alt = 'helper';
            icon.style.cssText = 'width: 48px; height: 48px;';
            groupSizeGroup.appendChild(icon);
          }
          container.appendChild(groupSizeGroup);
        }
      }

      // Handle form submissions
      document.addEventListener('submit', (e) => {
        if (!e.target.matches('form')) return;

        const screen = e.target.closest('.screen.active');
        if (!screen) return;

        const route = screen.dataset.screen;
        if (!getGenerator(route)) return;

        e.preventDefault();

        const { questions, currentIndex } = currentExercise;
        if (currentIndex >= questions.length) return;

        const input = e.target.querySelector('input[type="number"]');
        const userAnswer = parseInt(input.value);
        const currentQ = questions[currentIndex];

        if (isNaN(userAnswer)) {
          showCustomModal('Please enter a valid number.');
          return;
        }

        if (userAnswer === currentQ.answer) {
          currentExercise.score++;

          const avatar = screen.querySelector('.avatar-placeholder');
          if (avatar) {
            avatar.classList.add('avatar-flip');
            setTimeout(() => {
              avatar.classList.remove('avatar-flip');
            }, 600);
          }

          if (currentIndex === 9) {
            setTimeout(() => {
              showCustomModal(`Well done! You got ${currentExercise.score} out of 10 correct!`);
              currentExercise.currentIndex = 10;
              updateExerciseDisplay(route);
            }, 600);
          } else {
            setTimeout(() => {
              currentExercise.currentIndex++;
              updateExerciseDisplay(route);
            }, 600);
          }
        } else {
          showCustomModal('Oops, try it again!');
          input.value = '';
        }
      });

      buttons.forEach((button) => {
        button.addEventListener('click', () => {
          const route = button.dataset.route;
          if (route) {
            showScreen(route);
          }
        });
      });

      // ========== AVATAR SELECTION ==========
      document.addEventListener('click', (e) => {
        if (e.target.matches('.card button') && e.target.closest('[data-screen="/settings/avatar"]')) {
          const card = e.target.closest('.card');
          const img = card.querySelector('img');

          if (img && img.src) {
            selectedAvatar = img.getAttribute('src');

            const avatarScreen = document.querySelector('[data-screen="/settings/avatar"]');
            const allButtons = avatarScreen.querySelectorAll('.card button');
            allButtons.forEach(btn => {
              btn.textContent = 'Select Avatar';
              btn.className = 'btn btn-secondary';
            });

            e.target.textContent = 'Selected ✓';
            e.target.className = 'btn btn-success selected-avatar';

            updateAllAvatars();

            const allImages = avatarScreen.querySelectorAll('.card img');
            allImages.forEach(image => {
              image.style.border = 'none';
            });
            img.style.border = '3px solid var(--primary-blue)';
          }
        }
      });

      // ========== HELPER ICON SELECTION ==========
      document.addEventListener('click', (e) => {
        if (e.target.matches('.card button') && e.target.closest('[data-screen="/settings/icons"]')) {
          const card = e.target.closest('.card');
          const firstIcon = card.querySelector('.helper-icons img');

          if (firstIcon && firstIcon.src) {
            selectedHelperIcon = firstIcon.getAttribute('src');

            const iconScreen = document.querySelector('[data-screen="/settings/icons"]');
            const allButtons = iconScreen.querySelectorAll('.card button');
            allButtons.forEach(btn => {
              btn.textContent = 'Use set';
              btn.className = 'btn btn-primary';
            });

            e.target.textContent = 'Selected ✓';
            e.target.className = 'btn btn-success';

            updateAllHelperIcons();
          }
        }
      });

      showScreen('/login');
      updateAllAvatars();
    })();
  </script>
</body>
</html>
